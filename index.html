<!DOCTYPE html>
<html manifest="file.manifest">
  <head>
    <meta charset="utf-8" name="viewport" content="initial-scale=1, maximum-scale=1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <!--Style Sheet for the index.html page -->
    <link href="stylesheet.css" rel="stylesheet" type="text/css" />
    <!-- jquery -->
    <script src="jquery-3.2.1.min.js"></script>
    <!--Icons for mobile app icons-->
    <link rel="apple-touch-icon" sizes="120x120" href="touch-icon-iphone.png">
    <link rel="apple-touch-icon" sizes="152x152" href="touch-icon-ipad.png">
    <link rel="apple-touch-icon" sizes="167x167" href="touch-icon-ipad-pro.png">
    <link rel="apple-touch-icon" sizes="180x180" href="touch-icon-iphone-retina.png">
    <link rel="apple-touch-icon" sizes="80x80" href="touch-icon-spotlight.png">
      <title>Aerobic Exercise Prescription</title>
  </head>
  <body>
    <form method="post" class="TopForm">
      <input type="number" id="Age" min="0" inputmode="numeric" pattern="[0-9]*" title="Non-negative integral number"> Age <br>
      <input type="number" id="restingHR" min="0" inputmode="numeric" pattern="[0-9]*" title="Non-negative integral number"> Resting Heart Rate (optional)<br>
    </form>
    <br>
    <br>
    <button id="calculate">Calculate</button>
    <button id="Reset" class="green">Reset</button>
    <br>
    <br>
    <br>
    <form class="Form">
      <p class="big">Heart Rate Calculations</p>
      <div class="bandHide" id="HRMax">HR max: <input type="text" id="calcHRMax"> bpm</div>
      <div class="bandHide" id="HRReserve">Heart Rate Reserve: <input type="text" id="calcHRReserve"> bpm</div>
      <div class="bandHide" id="HRMaxsixtypercent">60% Max: <input type="text" id="sixtyPercentHRMax"> bpm</div>
      <div class="bandHide" id="blueBand">Blue band: <input type="text" id="blueNewRestingLength"> inches</div>

    </form>
    <script>
    function calcHide() {
      $("#HRMax").hide();
      $("#HRReserve").hide();
      $("#HRMaxsixtypercent").hide();
      $("#blueBand").hide();

    };
      $("button#calculate").on("click", function() {
        //calcHide();
        var restingHR = $("input#restingHR").val();
        var Age = $("input#Age").val();
        var heartRateMax = Math.round(207 - (Age * 0.7));
        var heartRateReserve = Math.round(heartRateMax - restingHR);
        var sixtyPercentHeartRateMax = Math.round(heartRateMax * 0.6);
        var blueRL = Math.round(10*(Age * 0.0443 / (0.01*(restingHR - 2.323))))/10;

      // Resting length output
        $("input#calcHRMax").val(heartRateMax);
        $("input#calcHRReserve").val(heartRateReserve);
        $("input#sixtyPercentHRMax").val(sixtyPercentHeartRateMax);
        $("input#blueNewRestingLength").val(blueRL);

      // Shows only the bands in the correct ranges
        function calcShow(x,y,z) {
          if (x <= restingHR && restingHR <= y) {
            $(z).show();
          };
        }
        calcShow(2.9,5.8,"#HRMax");
        calcShow(3.9,7.0,"#HRReserve");
        calcShow(5.0,9.6,"#HRMaxsixtypercent");
        calcShow(7.1,13.3,"#blueBand");

        if (restingHR < 2.9 || 160.4 < restingHR) {
          alert("Out of range")
        }
      });
      $("button#Reset").on("click", function () {
        $('.Form').trigger("reset");
        $('.TopForm').trigger("reset");
        calcHide();
      });
    </script>
  </body>
</html>
